---
import Form from './Form.astro'

export interface Props {
  class?: string
}

const { class: className, ...rest } = Astro.props
---

<div
  {...rest}
  class:list={['f-d-16-r f-m-14-r promocode', className]}
>
  <Form class="promocode__form">
    <input
      name="promo-code"
      required
      type="text"
      class="promocode__input"
      placeholder="Промокод"
    />
    <button
      class="promocode__button"
      type="submit"
      >Применить</button
    >
  </Form>
  <span class="promocode__info">Промокод применен</span>
</div>

<style is:global>
  .promocode {
    display: block;
  }

  .promocode__form {
    position: relative;

    width: 100%;
    height: 5.1rem;

    background-color: var(--color-secondary-1);
    border-radius: var(--border-radius-1);

    @media (max-width: 768px) {
      height: 4.1rem;
    }

    margin-bottom: 1rem;
  }

  .promocode__input {
    width: 78%;
    height: 100%;

    padding-left: 2.4rem;

    border-radius: var(--border-radius-1);

    @media (max-width: 768px) {
      padding-left: 1.6rem;
      width: 68%;
    }
  }

  .promocode__info {
    display: none;

    .promocode.pending &,
    .promocode.success &,
    .promocode.error & {
      display: block;
    }

    .promocode.success & {
      color: var(--color-secondary-7);
    }

    .promocode.error & {
      color: var(--color-primary-3);
    }
  }

  .promocode__button {
    color: var(--color-secondary-6);

    position: absolute;
    top: 50%;
    right: 2.4rem;

    transform: translateY(-50%);

    @media (max-width: 768px) {
      right: 1.6rem;
    }

    .promocode.pending & {
      opacity: 0;
      pointer-events: none;
    }
  }
</style>
