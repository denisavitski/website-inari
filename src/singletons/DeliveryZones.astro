<!-- 
  SINGLETON
  Зоны должны иметь такие же названия как и на карте
-->
<e-delivery-zone
  class="visually-hidden"
  name="зона 1"
  description="Бесплатная доставка при заказе от 1300р. с учётом скидок"
  addition="При меньшей сумме заказа доставка платная - 300 руб."
  free="1300"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="зона 2"
  description="Бесплатная доставка при заказе от 1300р. с учётом скидок"
  addition="При меньшей сумме заказа доставка платная - 300 руб."
  free="1300"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="зона 3"
  description="Бесплатная доставка при заказе от 1300р. с учётом скидок"
  addition="При меньшей сумме заказа доставка платная - 300 руб."
  free="1300"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="зона 4"
  description="Бесплатная доставка при заказе от 1500р. с учётом скидок."
  addition="При меньшей сумме заказа доставка платная - 300 руб."
  free="1500"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="зона 5"
  description="Бесплатная доставка при заказе от 1700р. с учётом скидок."
  addition="При меньшей сумме заказа доставка платная - 300 руб."
  free="1700"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="зона 6"
  description="Доставка платная 300 руб."
  addition=""
  free="0"
  price="300"
></e-delivery-zone>

<e-delivery-zone
  class="visually-hidden"
  name="UNKNOWN"
  description="Вы не попадаете в зону доставки. Возможность доставки за город или на удаленные районы обсуждается индивидуально."
></e-delivery-zone>

<script>
  import { globalStore } from '@stores/globalStore'

  export class DeliveryZoneElement extends HTMLElement {
    protected connectedCallback() {
      const name = this.getAttribute('name') || ''
      const description = this.getAttribute('description') || ''
      const addition = this.getAttribute('addition') || ''
      const free = this.getAttribute('free') || '0'
      const price = this.getAttribute('price') || '0'

      globalStore.delivery.addZone({
        name,
        description,
        addition,
        free: parseInt(free),
        price: parseInt(price),
      })
    }

    protected disconnectedCallback() {
      const name = this.getAttribute('name') || ''
      globalStore.delivery.removeZone(name)
    }
  }

  if (!customElements.get('e-delivery-zone')) {
    customElements.define('e-delivery-zone', DeliveryZoneElement)
  }

  declare global {
    interface HTMLElementTagNameMap {
      'e-delivery-zone': DeliveryZoneElement
    }
  }
</script>
